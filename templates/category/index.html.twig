{% extends 'base.html.twig' %}

{% block title %}Category Index{% endblock %}

{% block body %}
<style>
    #mebody {background-color:rgb(0, 5, 60); color: white; font-family: Arial, sans-serif; } 
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; } 
    .example-wrapper code { background: #000435; padding: 2px 6px; } 
    h1 { text-align: center; margin-bottom: 20px; } 
    ul { list-style-type: none; padding: 0; } 
    li { padding: 5px 0; } 
    .form-container { background:rgb(4, 4, 81); padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-top: 20px; } 
    .form-group { margin-bottom: 15px; } 
    .form-group label { display: block; margin-bottom: 5px; } 
    .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; } 
    .btn { display: inline-block; padding: 10px 20px; background-color:rgb(5, 50, 98); color: white; text-align: center; border: none; border-radius: 4px; cursor: pointer;} 
    .btn:hover { background-color:rgb(3, 37, 73); }
    .modal-header, .modal-body, .modal-footer { background-color:rgb(3, 37, 73); color:white; }
    .modal .btn-btn-primary { width:45%;padding-right:10px; }
    .btn-btn-secondary { margin-left:500px; }
</style>
<body id="mebody">
<h2>Categories</h2> 
<ul> 
    {% for category in categories %} 
        <li>{{ category }}</li> 
    {% endfor %}
</ul>

<div class="container mt-3">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#memodal">Create New Expense</button>
</div>

<!-- The Modal -->
<div class="modal" id="memodal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Record your expense</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                {{ form_start(expenses_form) }}
                <div class="form-group">
                    {{ form_label(expenses_form.Title) }}
                    {{ form_widget(expenses_form.Title) }}
                </div>
                <div class="form-group">
                    {{ form_label(expenses_form.amount) }}
                    {{ form_widget(expenses_form.amount) }}
                </div>
                <div class="form-group">
                    {{ form_label(expenses_form.category) }}
                    {{ form_widget(expenses_form.category) }}
                </div>
                <div class="form-group">
                    {{ form_label(expenses_form.date) }}
                    {{ form_widget(expenses_form.date) }}
                </div>
                <div class="form-group">
                    {{ form_label(expenses_form.notes) }}
                    {{ form_widget(expenses_form.notes) }}
                </div>
                <button class="btn btn-primary">{{ button_label|default('Save ME!') }}</button>  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                {{ form_end(expenses_form) }}
            </div>
            <div class="modal-footer" style="background-color:rgb(3, 37, 73); ">
                
            </div>
        </div>
    </div>
</div>
<div class="container mt-3" style="width:515px;height:215px;">
    <canvas id="myChart"></canvas>
</div>

 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart').getContext('2d');

  new Chart(ctx, {
    type: 'pie',
    data: {
      labels: {{ categories|json_encode()|raw }},
      datasets: [{
        label: 'Expenses per month',
        data: {{ categoryData|json_encode()|raw }},
        borderWidth: 1,
        backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)', 'rgb(255, 205, 86)'],
        hoverOffset: 4
      }]
    },
    options: {
        cutout: '0%',
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
  });
</script>
</body>
{% endblock %} 

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('app') }}
{% endblock %}
